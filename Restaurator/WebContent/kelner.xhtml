<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">    
<h:head>
<link href="./css/styles.css" 
      rel="stylesheet" type="text/css"/> 
<title>Kelner</title>
</h:head>
<h:body>

<h:form>
<h:commandLink value="Wyloguj" action="#{logowanie.wyloguj()}" style="float:right;"/>
<h1 class="title">Kelner</h1>

		<h2>Moje zamówienia</h2>
		<h3>Nowe Zamówienia</h3>
		Ilość nowych zamówień: <h:outputText value="#{kelner.iloscNowychZamowien}"/> <br />
		<h:dataTable id="noweZamowienia" var="noweZamowienie" value="#{kelner.noweZamowienia}" rendered="#{kelner.iloscNowychZamowien >0}" border="1" cellpadding="3">
			<h:column>
				<f:facet name="header">Zamówienie</f:facet>
				#{noweZamowienie.idZamowienia}
			</h:column>
			<h:column>
			<f:facet name="header">Nazwa produktu</f:facet>
			<ui:repeat var="produkt" value="#{noweZamowienie.produkty}">
				<h:outputText value="#{produkt.nazwa}"/> <br />
			</ui:repeat>
			</h:column>
			<h:column>
			<f:facet name="header">Ilość</f:facet>
			<ui:repeat var="produkt" value="#{noweZamowienie.produkty}">
				<h:outputText value="#{produkt.ilosc}" style="float:center;" /> <br/>			
			</ui:repeat>
			</h:column>			
			<h:column>
				<f:facet name="header">Stolik</f:facet>
				#{noweZamowienie.nrStolika}
			</h:column>
			<h:column>
			<f:facet name="header">Data złożenia zamówienia</f:facet>
				<h:outputText value="#{noweZamowienie.dataPrzyjecia}">
			  		<f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" timeZone="Europe/Berlin" />
				</h:outputText>
			</h:column>
			<h:column>
			<f:facet name="header">Usuń</f:facet>
				<h:commandButton value="Usuń" action="#{kelner.usunNoweZamowienie(noweZamowienie.idZamowienia)}"> 
					<f:ajax render="@form"/>
				</h:commandButton>
			</h:column>
			<h:column>
			<f:facet name="header">Przekaż</f:facet>
				<h:commandButton value="Do kuchni" action="#{kelner.doKuchni(noweZamowienie.idZamowienia)}"> 
					<f:ajax render="@all"/>
				</h:commandButton>
			</h:column>
		</h:dataTable>
		<br />
		<h3>Zamówienia do podania</h3>
		Ilość zamówień do podania: <h:outputText value="#{kelner.iloscZamowienDoPodania}"/>
		<h:dataTable id="zamowieniaDoPodania" var="zamowienieDoPodania" value="#{kelner.zamowieniaDoPodania}" rendered="#{kelner.iloscZamowienDoPodania >0}" border="1" cellpadding="3">
			<h:column>
				<f:facet name="header">Zamówienie</f:facet>
				#{zamowienieDoPodania.idZamowienia}
			</h:column>
			<h:column>
			<f:facet name="header">Nazwa produktu</f:facet>
			<ui:repeat var="produkt" value="#{zamowienieDoPodania.produkty}">
				<h:outputText value="#{produkt.nazwa}"/> <br />
			</ui:repeat>
			</h:column>
			<h:column>
			<f:facet name="header">Ilość</f:facet>
			<ui:repeat var="produkt" value="#{zamowienieDoPodania.produkty}">
				<h:outputText value="#{produkt.ilosc}" style="float:center;" /> <br/>			
			</ui:repeat>
			</h:column>			
			<h:column>
				<f:facet name="header">Stolik</f:facet>
				#{zamowienieDoPodania.nrStolika}
			</h:column>
			<h:column>
			<f:facet name="header">Data złożenia zamówienia</f:facet>
				<h:outputText value="#{zamowienieDoPodania.dataPrzyjecia}">
			  		<f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" timeZone="Europe/Berlin" />
				</h:outputText>
			</h:column>
			<h:column>
			<f:facet name="header">Usuń</f:facet>
				<h:commandButton value="Usuń" action="#{kelner.usunZamowienieDoPodania(zamowienieDoPodania.idZamowienia)}"> 
					<f:ajax render="@all"/>
				</h:commandButton>
			</h:column>
			<h:column>
			<f:facet name="header">Przekaż</f:facet>
				<h:commandButton value="Do klienta" action="#{kelner.doKlienta(zamowienieDoPodania.idZamowienia)}"> 
					<f:ajax render="@all"/>
				</h:commandButton>
			</h:column>
		</h:dataTable>
	    <br />
		<h:commandButton value="Dodaj zamówienie" action="#{kelner.dodajZamowienie}" style="float: right; width : 122px; height : 47px;" />
</h:form>
</h:body>
</html>